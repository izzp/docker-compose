[mysqld]
# 基础
character-set-server = utf8mb4
collation-server = utf8mb4_0900_ai_ci
default-time-zone = +08:00

# 连接 & 性能
max_connections = 200
table_open_cache = 1000
thread_cache_size = 32
open_files_limit = 65535
wait_timeout = 600

# =================== 优化配置开始 ===================

# =================== 优化配置结束 ===================

# 目录
datadir = /var/lib/mysql
socket = /var/lib/mysql/mysql.sock
pid-file = /var/lib/mysql/mysql.pid

# MySQL错误日志文件路径
log_error = /var/log/mysql/mysql-error.log

# =================== binlog配置开始 ===================
# binlog
log-bin = /var/log/mysql/binlog/binlog
binlog_format = ROW
binlog_row_image = MINIMAL
sync_binlog = 1
max_binlog_size = 512M
binlog_expire_logs_seconds = 604800
# =================== binlog配置结束 ===================

# =================== 慢日志配置开始 ===================
# 慢日志是否开启，ON=开启，OFF=关闭
slow_query_log = ON
# 慢查询时间（秒）
long_query_time = 3
# 慢日志文件路径
slow_query_log_file = /var/log/mysql/mysql_slow_query.log
# 记录（ALTER TABLE、ANALYZE TABLE等）到慢查询日志中，ON=开启，OFF=关闭
log_slow_admin_statements = OFF
# 记录所有未带索引的查询到慢日志中，ON=开启，OFF=关闭
log_queries_not_using_indexes = OFF
# 限制所有未带索引的查询记录频率(每分钟条数)
log_throttle_queries_not_using_indexes = 0
# 超过多少行的查询才会被记录到慢日志中
min_examined_row_limit = 0
# =================== 慢日志配置结束 ===================

# 安全
skip-name-resolve

# 大小写不敏感
lower_case_table_names = 1

# SQL 模式
sql_mode = STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION,ONLY_FULL_GROUP_BY,NO_ZERO_IN_DATE,NO_ZERO_DATE

[client]
default-character-set = utf8mb4
socket = /var/lib/mysql/mysql.sock

!includedir /etc/mysql/conf.d/